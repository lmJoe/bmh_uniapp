(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["components-upload"],{"0842":function(t,e,a){var i=a("7223");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("1692c056",i,!0,{sourceMap:!1,shadowMode:!1})},"0a56":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniTag:a("4be1").default},o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"uploadPage"},[a("v-uni-view",{staticClass:"upLoad"},[a("v-uni-view",{staticClass:"upLoadArea",style:{width:t.uploadWidth+"rpx",height:t.uploadHeight+"rpx"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.upLoadVideo()}}},[t.uploadSuccess?a("v-uni-text",{staticClass:"chosePost",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.chosePost(t.videoUrl)}}},[t._v("选择封面")]):t._e()],1)],1),a("v-uni-view",{staticClass:"intro"},[a("v-uni-textarea",{staticClass:"introArea",attrs:{placeholder:"说点什么...",maxlength:"30"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.bindTextAreaBlur.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"showNum",staticStyle:{"text-align":"right"}},[a("v-uni-view",{staticStyle:{"font-size":"14px"},attrs:{id:"span_Font_Length"}},[t._v(t._s(t.areaNum))]),a("v-uni-view",{staticStyle:{"font-size":"14px"}},[t._v("/")]),a("v-uni-view",{staticStyle:{"font-size":"14px"}},[t._v("30")])],1)],1),a("v-uni-view",{staticClass:"tagArea"},[a("v-uni-view",{staticClass:"tagTitle"},[a("v-uni-text",[t._v("标签")]),a("v-uni-text",[t._v(">")])],1),a("v-uni-view",{staticClass:"tagList"},t._l(t.tagList,(function(e,i){return a("v-uni-view",{key:e.id,staticClass:"tag-view"},[a("uni-tag",{staticClass:"tag",attrs:{circle:!0,inverted:e.inverted,id:e.id,text:e.name,type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.setInverted(e)}}})],1)})),1)],1),a("v-uni-view",{staticClass:"uploadloaction",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getLocation.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"loactionTitle"},[a("v-uni-text",[t._v("地点")]),a("v-uni-text",[t._v(">")])],1)],1),a("v-uni-view",{staticClass:"operArea"},[a("v-uni-button",{staticClass:"leftBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.storeLocal.apply(void 0,arguments)}}},[t._v("存草稿")]),a("v-uni-button",{staticClass:"rightBtn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.publish.apply(void 0,arguments)}}},[t._v("立即发布")])],1)],1)},n=[]},3842:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"UniTag",emits:["click"],props:{type:{type:String,default:"default"},size:{type:String,default:"normal"},text:{type:String,default:""},disabled:{type:[Boolean,String],default:!1},inverted:{type:[Boolean,String],default:!1},circle:{type:[Boolean,String],default:!1},mark:{type:[Boolean,String],default:!1},customStyle:{type:String,default:""}},computed:{classes:function(){var t=this.type,e=this.disabled,a=this.inverted,i=this.circle,o=this.mark,n=this.size,r=this.isTrue,l=["uni-tag--"+t,"uni-tag--"+n,r(e)?"uni-tag--disabled":"",r(a)?"uni-tag--"+t+"--inverted":"",r(i)?"uni-tag--circle":"",r(o)?"uni-tag--mark":"",r(a)?"uni-tag--inverted uni-tag-text--"+t:"","small"===n?"uni-tag-text--small":""];return l.join(" ")}},methods:{isTrue:function(t){return!0===t||"true"===t},onClick:function(){this.isTrue(this.disabled)||this.$emit("click")}}};e.default=i},4522:function(t,e,a){"use strict";var i=a("0842"),o=a.n(i);o.a},"4be1":function(t,e,a){"use strict";a.r(e);var i=a("9640"),o=a("ea4a");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("4522");var r,l=a("f0c5"),d=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"0deef532",null,!1,i["a"],r);e["default"]=d.exports},"5c9f":function(t,e,a){var i=a("83ea");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("dcd48974",i,!0,{sourceMap:!1,shadowMode:!1})},7223:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-tag[data-v-0deef532]{line-height:14px;font-size:12px;font-weight:200;padding:4px 7px;color:#fff;border-radius:3px;background-color:#8f939c;border-width:%?1?%;border-style:solid;border-color:#8f939c;cursor:pointer}.uni-tag--default[data-v-0deef532]{font-size:12px}.uni-tag--default--inverted[data-v-0deef532]{color:#8f939c;border-color:#8f939c}.uni-tag--small[data-v-0deef532]{padding:2px 5px;font-size:12px;border-radius:2px}.uni-tag--mini[data-v-0deef532]{padding:1px 3px;font-size:12px;border-radius:2px}.uni-tag--primary[data-v-0deef532]{background-color:#2979ff;border-color:#2979ff;color:#fff}.uni-tag--success[data-v-0deef532]{color:#fff;background-color:#18bc37;border-color:#18bc37}.uni-tag--warning[data-v-0deef532]{color:#fff;background-color:#f3a73f;border-color:#f3a73f}.uni-tag--error[data-v-0deef532]{color:#fff;background-color:#e43d33;border-color:#e43d33}.uni-tag--primary--inverted[data-v-0deef532]{color:#2979ff;border-color:#2979ff}.uni-tag--success--inverted[data-v-0deef532]{color:#18bc37;border-color:#18bc37}.uni-tag--warning--inverted[data-v-0deef532]{color:#f3a73f;border-color:#f3a73f}.uni-tag--error--inverted[data-v-0deef532]{color:#e43d33;border-color:#e43d33}.uni-tag--inverted[data-v-0deef532]{background-color:#fff}.uni-tag--circle[data-v-0deef532]{border-radius:15px!important}.uni-tag--mark[data-v-0deef532]{border-top-left-radius:0!important;border-bottom-left-radius:0!important;border-top-right-radius:15px!important;border-bottom-right-radius:15px!important}.uni-tag--disabled[data-v-0deef532]{opacity:.5;cursor:not-allowed}.uni-tag-text[data-v-0deef532]{color:#fff;font-size:14px}.uni-tag-text--primary[data-v-0deef532]{color:#2979ff}.uni-tag-text--success[data-v-0deef532]{color:#18bc37}.uni-tag-text--warning[data-v-0deef532]{color:#f3a73f}.uni-tag-text--error[data-v-0deef532]{color:#e43d33}.uni-tag-text--small[data-v-0deef532]{font-size:12px}',""]),t.exports=e},"83ea":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".uploadPage[data-v-2673fac0]{display:flex;justify-content:center;flex-direction:column;background:#fff;padding:0 %?30?%}.uploadPage .upLoad[data-v-2673fac0]{display:flex;align-items:center;flex-direction:column}.uploadPage .upLoad .upLoadArea[data-v-2673fac0]{width:%?428?%;height:%?530?%;border:1px solid #dedede;margin-top:%?20?%;position:relative}.uploadPage .upLoad .upLoadArea .chosePost[data-v-2673fac0]{position:absolute;bottom:0;background:rgba(0,0,0,.5);width:100%;padding:%?20?% 0;text-align:center;color:#fff;font-size:%?28?%}.uploadPage .intro[data-v-2673fac0]{position:relative}.uploadPage .intro .introArea[data-v-2673fac0]{width:%?642?%;height:%?180?%;background:#f4f4f4;border-radius:%?10?%;margin-top:%?24?%;padding:%?20?% %?24?%}.uploadPage .intro .showNum[data-v-2673fac0]{display:flex;flex-direction:row;align-items:center;justify-content:center;position:absolute;bottom:%?16?%;right:%?24?%;color:#999;font-size:%?30?%}.uploadPage .tagArea[data-v-2673fac0]{padding:%?26?% 0;display:flex;flex-direction:column}.uploadPage .tagArea .tagTitle[data-v-2673fac0]{display:flex;justify-content:space-between;color:#222;font-size:%?30?%}.uploadPage .tagArea .tagList[data-v-2673fac0]{display:flex;flex-direction:row;justify-content:flex-start;margin-top:%?24?%;flex-wrap:wrap}.uploadPage .tagArea .tagList .tag-view[data-v-2673fac0]{margin-right:%?20?%;margin-bottom:%?30?%}.uploadPage .uploadloaction[data-v-2673fac0]{padding:%?26?% 0;display:flex;flex-direction:column}.uploadPage .uploadloaction .loactionTitle[data-v-2673fac0]{display:flex;justify-content:space-between;color:#222;font-size:%?30?%}.uploadPage .operArea[data-v-2673fac0]{display:flex;flex-direction:row;justify-content:space-between;margin-bottom:%?30?%;margin-top:%?230?%}.uploadPage .operArea .leftBtn[data-v-2673fac0]{width:%?240?%;height:%?84?%;border-radius:%?50?%;font-size:%?24?%;color:#222;line-height:%?84?%}.uploadPage .operArea .rightBtn[data-v-2673fac0]{width:%?426?%;height:%?84?%;border-radius:%?50?%;font-size:%?24?%;color:#fff;background:#ff4a45;line-height:%?84?%}[data-v-2673fac0] .uni-tag-text--primary{color:#666}[data-v-2673fac0] .uni-tag--primary--inverted{border-color:#dedede}[data-v-2673fac0] .uni-tag{padding:%?12?% %?26?%;font-size:%?24?%}uni-button[data-v-2673fac0]:after{border:none}",""]),t.exports=e},8982:function(t,e,a){"use strict";a("a434"),a("ac1f"),a("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{sourceType:["拍摄","相册","拍摄或相册"],cameraIndex:0,cameraList:[{value:"back",name:"后置摄像头",checked:"true"},{value:"front",name:"前置摄像头"}],uploadWidth:"",uploadHeight:"",videoUrl:"https://img.cdn.aliyun.dcloud.net.cn/guide/uniapp/%E7%AC%AC1%E8%AE%B2%EF%BC%88uni-app%E4%BA%A7%E5%93%81%E4%BB%8B%E7%BB%8D%EF%BC%89-%20DCloud%E5%AE%98%E6%96%B9%E8%A7%86%E9%A2%91%E6%95%99%E7%A8%8B@20181126-lite.m4v",videoName:"",uploadSuccess:!1,areaNum:0,tagList:[{id:1,name:"生活记录",inverted:!0},{id:2,name:"生活",inverted:!0},{id:3,name:"自制",inverted:!0},{id:4,name:"学习",inverted:!0},{id:5,name:"VLOG",inverted:!0},{id:6,name:"记录",inverted:!0}],loadProgress:0,dltDownLvNew:"",dltDownLvAll:"",dltDownLvWc:"",downloadUlr:"",suffix:""}},created:function(){},mounted:function(){},methods:{bindTextAreaBlur:function(t){console.log(t.detail.value.length),this.areaNum=t.detail.value.length},chosePost:function(){console.log("选择封面")},setInverted:function(t){var e=uni.createSelectorQuery().in(this);e.selectAll(".tag").boundingClientRect((function(e){for(var a=0;a<e.length;a++)e[a].id==t.id&&(t.inverted=!t.inverted)})).exec()},upLoadVideo:function(){var t=this;uni.chooseVideo({count:1,camera:this.cameraList[this.cameraIndex].value,sourceType:["album","camera"],success:function(e){e.tempFilePath;t.uploadWidth=e.width,t.uploadHeight=e.height,t.videoName=e.name,t.uploadSuccess=!0,uni.showLoading({title:"上传中...",mask:!0,success:function(){setTimeout((function(){uni.hideLoading()}),3e3)},fail:"",complete:function(){}})}})},getLocation:function(){var t=this;uni.getStorageSync("token")&&uni.getLocation({type:"gcj02 ",success:function(e){uni.setStorageSync("userLocation",JSON.stringify(e)),t.request({url:"/driver/order/point_upload",data:{location:e.longitude+","+e.latitude,locatetime:(new Date).getTime()||"",speed:e.speed||"",accuracy:e.accuracy||""},method:"post"}).then((function(t){uni.showToast({title:t.msg,icon:"none"})}))},fail:function(){uni.showToast({title:"获取位置失败",icon:"none"})}})},storeLocal:function(){var t=this,e=this.videoUrl;if(this.downloadUlr=e,this.suffix=e.split(".")[e.split(".").length-1],"MP4"==e.substring(e.length-3)||"mp4"==e.substring(e.length-3)||"jpg"==e.substring(e.length-3)||"png"==e.substring(e.length-3)){var a=uni.downloadFile({url:e,success:function(t){200===t.statusCode?"mp4"==t.tempFilePath.substring(t.tempFilePath.length-3)||"MP4"==t.tempFilePath.substring(t.tempFilePath.length-3)?uni.saveVideoToPhotosAlbum({filePath:t.tempFilePath,success:function(){uni.showToast({title:"保存成功",icon:"none",duration:2e3,mask:!0})},fail:function(){this.loadProgress=0,uni.showToast({title:"保存失败",icon:"none"})}}):uni.saveImageToPhotosAlbum({filePath:t.tempFilePath,success:function(){uni.showToast({title:"保存成功",icon:"none",duration:2e3,mask:!0})},fail:function(){this.loadProgress=0,uni.showToast({title:"保存失败",icon:"none"})}}):uni.showToast({title:"下载失败",icon:"none"})},fail:function(e){t.loadProgress=0,uni.showToast({icon:"none",mask:!0,title:"下载失败"})}});a.onProgressUpdate((function(e){t.loadProgress=e.progress,t.loadProgress<100||(t.loadProgress=0),e.totalBytesExpectedToWrite<10485760?(t.dltDownLvNew=Math.ceil(e.totalBytesWritten/1024)+"KB",t.dltDownLvAll=Math.ceil(e.totalBytesExpectedToWrite/1024)+"KB",t.dltDownLvWc=e.progress+"%"):(t.dltDownLvNew=Math.ceil(e.totalBytesWritten/1048576)+"M",t.dltDownLvAll=Math.ceil(e.totalBytesExpectedToWrite/1048576)+"M",t.dltDownLvWc=e.progress+"%")}))}else{var i=this,o=uni.downloadFile({url:e,success:function(e){if(uni.hideLoading(),200===e.statusCode)e.tempFilePath,i.downloadUlr.split("/")[i.downloadUlr.split("/").length-1];else t.loadProgress=0,uni.showToast({icon:"none",mask:!0,title:"下载失败"})},fail:function(e){t.arcZzShow=!1,t.loadProgress=0,uni.showToast({icon:"none",mask:!0,title:"下载失败"})}});o.onProgressUpdate((function(e){t.loadProgress=e.progress,t.loadProgress<100||(t.loadProgress=0),e.totalBytesExpectedToWrite<10485760?(t.dltDownLvNew=Math.ceil(e.totalBytesWritten/1024)+"KB",t.dltDownLvAll=Math.ceil(e.totalBytesExpectedToWrite/1024)+"KB",t.dltDownLvWc=e.progress+"%"):(t.dltDownLvNew=Math.ceil(e.totalBytesWritten/1048576)+"M",t.dltDownLvAll=Math.ceil(e.totalBytesExpectedToWrite/1048576)+"M",t.dltDownLvWc=e.progress+"%")}))}},fSetFileName:function(t,e){e=e.split("/")[e.split("/").length-1],t.split("/").splice(0,t.split("/").length-1);var a=this.downloadUlr,i=plus.downloader.createDownload(a,{filename:"file://storage/emulated/0/AAA/"+e},(function(t,e){if(200==e)plus.io.convertLocalFileSystemURL(t.filename);else plus.downloader.clear()}));i.start()}}};e.default=i},9640:function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.text?a("v-uni-text",{staticClass:"uni-tag",class:t.classes,style:t.customStyle,on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}},[t._v(t._s(t.text))]):t._e()},n=[]},c5cf:function(t,e,a){"use strict";a.r(e);var i=a("8982"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},cb3c:function(t,e,a){"use strict";a.r(e);var i=a("0a56"),o=a("c5cf");for(var n in o)"default"!==n&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("f8cdf");var r,l=a("f0c5"),d=Object(l["a"])(o["default"],i["b"],i["c"],!1,null,"2673fac0",null,!1,i["a"],r);e["default"]=d.exports},ea4a:function(t,e,a){"use strict";a.r(e);var i=a("3842"),o=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},f8cdf:function(t,e,a){"use strict";var i=a("5c9f"),o=a.n(i);o.a}}]);