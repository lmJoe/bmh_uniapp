"use strict";var t=require("../../../common/vendor.js"),e=require("../../../utils/request.js"),i=require("../../../utils/untis.js");require("../../../utils/ajax.js"),require("../../../utils/api.js");const o=getApp(),s={data:()=>({customBarHeight:o.globalData.customBarH,navbarBgcolor:"#21252b",tabbarBgcolor:"#21252b",tabNavLs:[{label:"附近动态",badge:5,lists:[]},{label:"关注",lists:[]},{label:"推荐",dot:!0,lists:[]}],currentTab:0,pageIndex:1,pageSize:10,currentVideo:0,videoList:[],isPlaying:!1,clickNum:0,progressBar:0,clickTimer:null,winWidth:"",winHeight:"",popupGoodsList:[],showGoodsPopup:!1,showReplyPopup:!1,showSharePopup:!1,videosuList:["https://test-static01.pomoho.com/aaa.mp4","https://test-static01.pomoho.com/videoSc/1.mp4","https://test-static01.pomoho.com/videoSc/2.mp4","https://test-static01.pomoho.com/videoSc/3.mp4","https://test-static01.pomoho.com/videoSc/4.mp4","https://test-static01.pomoho.com/videoSc/5.mp4","https://test-static01.pomoho.com/videoSc/6.mp4","https://test-static01.pomoho.com/videoSc/7.mp4"],attentYes:"https://test-static01.pomoho.com/videoSc/icon1.png",attentNo:"https://test-static01.pomoho.com/videoSc/icon2.png"}),watch:{currentTab(t){this.changeTabPanel(t)}},computed:{customBarMargin(){return`margin-top: ${this.customBarHeight}px`}},onLoad(){t.index.getSyste},created(){let e=t.index.getSystemInfoSync(),i=750/e.windowWidth,o=e.statusBarHeight*i,s=44*i;e.windowWidth;let a=e.windowHeight*i,n=e.screenHeight*i-o-s-a,l=t.index.getSystemInfoSync().windowWidth;t.index.getSystemInfoSync().windowHeight,this.winWidth=`${l}px`,this.winHeight=a-n+"px"},mounted(){console.log("this.attentYes",this.attentYes),console.log("this.attentNo",this.attentNo),this.getVideoList()},methods:{getVideoList(){e.getVideoList(this.pageIndex,this.pageSize,"53ff9daa-a783-4da3-b8c0-587bae0c77ad",(e=>{if(1==e.code){let o=e.data;for(let t in o)o[t].Duration=i.changeHourMinutestr(o[t].Duration),o[t].CoverImgs=o[t].CoverImgs.replace("baomihua","pomoho"),o[t].HeadImg=o[t].HeadImg.replace("baomihua","pomoho"),o[t].Link=i.getRandomArrayElements(this.videosuList,1);this.videoList=o,t.index.stopPullDownRefresh(),console.log("this.videoList",this.videoList)}}))},handleTimeUpdate(t){let{currentTime:e,duration:i}=t.detail;this.progressBar=parseInt((e/i).toFixed(2)*parseInt(this.winWidth))},handleDynamicMenu(t){let e;e=[t.touches[0].clientX,t.touches[0].clientY],this.$refs.uapopup.open({type:"contextmenu",follow:e,btns:[{text:"不感兴趣"},{text:"复制"},{text:"举报",style:"color:#f00;",click:()=>{this.$refs.uapopup.close()}}]})},getVideoCtx(){return t.index.createVideoContext("vdplayer"+this.currentVideo,this)},handleSwipeVertical(t){let e=t.detail.current;this.progressBar=0,this.isPlaying=!1;let i=this.getVideoCtx();i&&(i.pause(),i.seek(0),this.currentVideo=e,this.handlePlay())},handlePlay(){let t=this.getVideoCtx();t&&(t.play(),this.isPlaying=!0)},handlePause(){let t=this.getVideoCtx();t&&(t.pause(),this.isPlaying=!1)},handleVideoClicked(){this.clickTimer&&clearTimeout(this.clickTimer),this.clickNum++,this.clickTimer=setTimeout((()=>{this.clickNum>=2?console.log("你双击了"):(console.log("你单击了"),this.isPlaying?this.handlePause():this.handlePlay()),this.clickNum=0}),250)},handleFollow(t){this.videoList[t].IsOriginal=2}}};var a=t._export_sfc(s,[["render",function(e,i,o,s,a,n){return{a:t.f(a.videoList,((e,i,o)=>t.e({a:"vdplayer"+i,b:"vdplayer"+i,c:e.Link,d:i==a.currentVideo},(a.isPlaying,{}),{e:t.t(e.NickName),f:t.t(e.Title),g:e.HeadImg,h:1==e.IsOriginal?a.attentYes:a.attentNo,i:e.isFollow?1:"",j:t.o((t=>n.handleFollow(i))),k:i}))),b:t.o((t=>a.isPlaying=!0)),c:t.o(((...t)=>n.handleTimeUpdate&&n.handleTimeUpdate(...t))),d:a.winWidth,e:a.winHeight,f:!a.isPlaying,g:t.o(((...t)=>n.handleVideoClicked&&n.handleVideoClicked(...t))),h:a.currentVideo,i:t.o(((...t)=>n.handleSwipeVertical&&n.handleSwipeVertical(...t))),j:a.progressBar+"px"}}],["__scopeId","data-v-4b4630fb"]]);wx.createPage(a);
